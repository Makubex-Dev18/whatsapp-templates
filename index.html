<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Plantillas WhatsApp</title>

  <style>
    @keyframes shimmer {
      0% {
        transform: translateX(-100%);
      }

      100% {
        transform: translateX(100%);
      }
    }

    .shimmer-effect::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transition: left 0.6s;
    }

    .shimmer-effect:hover::before {
      left: 100%;
    }
  </style>
</head>

<body class="bg-gradient-to-br from-whatsapp-light-green to-gray-50 min-h-screen text-gray-700 leading-relaxed">
  <main class="max-w-7xl mx-auto p-5 grid lg:grid-cols-2 gap-8 items-start">
    <!-- Título Principal -->
    <div class="lg:col-span-2 text-center mb-8">
      <h1 class="text-4xl lg:text-5xl font-bold text-whatsapp-dark-green mb-4 drop-shadow-sm relative">
        <span class="mr-4 text-4xl">💬</span>
        Gestor de Plantillas para WhatsApp
        <div
          class="absolute -bottom-3 left-1/2 transform -translate-x-1/2 w-24 h-1 bg-gradient-to-r from-whatsapp-green to-whatsapp-blue rounded-full">
        </div>
    </div>

    </h1>

    </div>

    <!-- Formulario de Nueva Plantilla -->
    <div
      class="bg-white rounded-2xl p-8 shadow-xl border border-gray-100 hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 animate-fade-in-up">
      <h2 class="text-2xl font-semibold text-whatsapp-dark-green mb-6 flex items-center gap-3">
        <span class="text-xl">✨</span>
        Nueva Plantilla
      </h2>

      <form id="template-form" class="space-y-6">
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">
            Nombre de la Plantilla:
          </label>
          <input type="text" id="template-name" required placeholder="Ej: Nombre de Persona"
            class="w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl text-base transition-all duration-300 focus:outline-none focus:border-whatsapp-green focus:bg-white focus:shadow-lg focus:-translate-y-1 focus:ring-4 focus:ring-whatsapp-green focus:ring-opacity-10" />
        </div>

        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-2">
            Mensaje:
          </label>
          <textarea id="template-message" required placeholder="Escribe tu mensaje inicial aquí..." rows="5"
            class="w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-xl text-base transition-all duration-300 resize-y focus:outline-none focus:border-whatsapp-green focus:bg-white focus:shadow-lg focus:-translate-y-1 focus:ring-4 focus:ring-whatsapp-green focus:ring-opacity-10"></textarea>
        </div>

        <div class="flex flex-col sm:flex-row gap-4 pt-2">
          <button type="submit" id="save-btn"
            class="flex-1 px-8 py-4 bg-gradient-to-r from-whatsapp-green to-whatsapp-dark-green text-white font-semibold rounded-xl hover:shadow-xl hover:-translate-y-1 transition-all duration-300 relative overflow-hidden shimmer-effect">
            💾 Guardar
          </button>
          <button type="button" id="cancel-edit-btn" style="display: none;"
            class="flex-1 px-8 py-4 bg-gradient-to-r from-red-500 to-red-600 text-white font-semibold rounded-xl hover:shadow-xl hover:-translate-y-1 transition-all duration-300 relative overflow-hidden shimmer-effect">
            ❌ Cancelar
          </button>
        </div>
      </form>
    </div>

    <!-- Vista Previa -->
    <div
      class="bg-white rounded-2xl p-8 shadow-xl border border-gray-100 hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 animate-fade-in-up sticky top-5">
      <h2 class="text-2xl font-semibold text-whatsapp-dark-green mb-6 flex items-center gap-3">
        <span class="text-xl">🟢</span>
        Vista Previa


      </h2>
      <div class="bg-gray-100 rounded-2xl overflow-hidden shadow-lg border border-gray-200">
        <!-- Header de WhatsApp -->
        <div class="bg-whatsapp-green text-white p-4 flex items-center gap-3">
          <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center">
            <span class="text-gray-600 text-sm font-medium">👤</span>
          </div>
          <div>
            <div class="font-semibold text-white">Tu Empresa</div>
            <div class="text-xs text-green-100">en línea</div>
          </div>
        </div>
        <!-- Área de mensaje -->
        <div id="preview-output"
          class="bg-whatsapp-gray p-6 min-h-[200px] text-gray-600 relative empty:before:content-['La_vista_previa_aparecerá_aquí_mientras_escribes...'] empty:before:text-gray-400 empty:before:italic empty:before:absolute empty:before:top-1/2 empty:before:left-1/2 empty:before:transform empty:before:-translate-x-1/2 empty:before:-translate-y-1/2 empty:before:text-center empty:before:w-full empty:before:px-4">
        </div>
      </div>
    </div>

    <!-- Lista de Plantillas -->
    <div
      class="lg:col-span-2 bg-white rounded-2xl p-8 shadow-xl border border-gray-100 hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 animate-fade-in-up mt-8">
      <h2 class="text-2xl font-semibold text-whatsapp-dark-green mb-6 flex items-center gap-3">
        <span class="text-xl">✨</span>
        Plantillas guardadas
      </h2>

      <!-- AÑADIDO: Botón para descargar -->
      <div class="flex justify-end mb-4">
        <button id="download-btn"
          class="px-6 py-3 bg-gradient-to-r from-green-500 to-indigo-600 text-white font-semibold rounded-xl hover:shadow-xl hover:-translate-y-1 transition-all duration-300 relative overflow-hidden shimmer-effect">
          ⬇️ Descargar Plantillas
        </button>
      </div>



      <ul id="templates-ul" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 mt-6"></ul>
    </div>
  </main>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'whatsapp-green': '#25D366',
            'whatsapp-dark-green': '#128C7E',
            'whatsapp-light-green': '#DCF8C6',
            'whatsapp-blue': '#34B7F1',
            'whatsapp-gray': '#ECE5DD',
          },
          animation: {
            'fade-in-up': 'fadeInUp 0.6s ease-out',
            'fade-in-up-fast': 'fadeInUp 0.4s ease-out',
            'shimmer': 'shimmer 0.6s ease-in-out',
            'spin-slow': 'spin 1s linear infinite',
          },
          keyframes: {
            fadeInUp: {
              '0%': {
                opacity: '0',
                transform: 'translateY(20px)'
              },
              '100%': {
                opacity: '1',
                transform: 'translateY(0)'
              }
            },
            shimmer: {
              '0%': { transform: 'translateX(-100%)' },
              '100%': { transform: 'translateX(100%)' }
            }
          }
        }
      }
    }
  </script>
  <script type="module">
    // Simulación del JavaScript original para demostración
    const templateForm = document.getElementById('template-form');
    const templateName = document.getElementById('template-name');
    const templateMessage = document.getElementById('template-message');
    const previewOutput = document.getElementById('preview-output');
    const templatesUl = document.getElementById('templates-ul');
    const saveBtn = document.getElementById('save-btn');
    const cancelEditBtn = document.getElementById('cancel-edit-btn');

    let templates = JSON.parse(localStorage.getItem('whatsapp-templates') || '[]');
    let editingIndex = -1;

    // Vista previa en tiempo real
    function updatePreview() {
      const message = templateMessage.value.trim();
      if (message) {
        previewOutput.className = 'bg-white border-2 border-solid border-whatsapp-green rounded-2xl p-6 min-h-[150px] transition-all duration-300 shadow-inner';
        previewOutput.textContent = message;
      } else {
        previewOutput.className = 'bg-whatsapp-gray border-2 border-dashed border-whatsapp-green rounded-2xl p-6 min-h-[150px] transition-all duration-300 relative empty:before:content-[\'La_vista_previa_aparecerá_aquí...\'] empty:before:text-gray-400 empty:before:italic empty:before:absolute empty:before:top-1/2 empty:before:left-1/2 empty:before:transform empty:before:-translate-x-1/2 empty:before:-translate-y-1/2 empty:before:text-center empty:before:w-full';
        previewOutput.textContent = '';
      }
    }

    templateMessage.addEventListener('input', updatePreview);
    templateName.addEventListener('input', updatePreview);

    // Renderizar plantillas
    function renderTemplates() {
      templatesUl.innerHTML = '';
      templates.forEach((template, index) => {
        const li = document.createElement('li');
        li.className = 'bg-white rounded-2xl p-6 shadow-lg border-l-4 border-whatsapp-green hover:shadow-xl hover:-translate-y-1 transition-all duration-300 relative animate-fade-in-up-fast group';
        li.innerHTML = `
          <div class="absolute top-4 right-4 text-xl opacity-70 group-hover:scale-110 transition-transform duration-300">📝</div>
          <div class="font-bold text-whatsapp-dark-green text-lg mb-3 group-hover:text-whatsapp-green transition-colors duration-300">${template.name}</div>
          <div class="text-gray-700 text-sm leading-relaxed mb-4 bg-gray-50 p-4 rounded-xl border-l-2 border-whatsapp-blue">${template.message}</div>
          <div class="flex gap-2 justify-end">
            <button 
              class="px-4 py-2 bg-gradient-to-r from-whatsapp-blue to-blue-500 text-white text-sm font-medium rounded-lg hover:shadow-lg hover:-translate-y-0.5 transition-all duration-300 relative overflow-hidden shimmer-effect"
              onclick="editTemplate(${index})"
            >
              ✏️ Editar
            </button>
            <button 
              class="px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white text-sm font-medium rounded-lg hover:shadow-lg hover:-translate-y-0.5 transition-all duration-300 relative overflow-hidden shimmer-effect"
              onclick="copyTemplate(${index})"
            >
              📋 Copiar
            </button>
            <button 
              class="px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white text-sm font-medium rounded-lg hover:shadow-lg hover:-translate-y-0.5 transition-all duration-300 relative overflow-hidden shimmer-effect"
              onclick="deleteTemplate(${index})"
            >
              🗑️ Eliminar
            </button>
          </div>
        `;
        templatesUl.appendChild(li);
      });
    }

    // Guardar plantilla
    templateForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const name = templateName.value.trim();
      const message = templateMessage.value.trim();

      if (!name || !message) {
        alert("Por favor, completa todos los campos antes de guardar.");
        return;
      }
      // Efecto de carga
      saveBtn.classList.add('opacity-70', 'pointer-events-none');
      saveBtn.innerHTML = '<div class="inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin-slow mr-2"></div>Guardando...';

      setTimeout(() => {
        if (editingIndex >= 0) {
          templates[editingIndex] = { name, message };
          editingIndex = -1;
          saveBtn.textContent = '💾 Guardar';
          cancelEditBtn.style.display = 'none';
        } else {
          templates.push({ name, message });
        }

        localStorage.setItem('whatsapp-templates', JSON.stringify(templates));
        templateForm.reset();
        updatePreview();
        renderTemplates();

        // Restaurar botón
        saveBtn.classList.remove('opacity-70', 'pointer-events-none');
        saveBtn.textContent = '💾 Guardar';
      }, 500);
    });

    // Funciones globales
    window.editTemplate = (index) => {
      const template = templates[index];
      templateName.value = template.name;
      templateMessage.value = template.message;
      editingIndex = index;
      saveBtn.textContent = '📝 Actualizar';
      cancelEditBtn.style.display = 'block';
      updatePreview();

      // Scroll al formulario
      document.querySelector('form').scrollIntoView({ behavior: 'smooth' });
    };

    window.copyTemplate = (index) => {
      const template = templates[index];
      navigator.clipboard.writeText(template.message).then(() => {
        // Efecto visual de copiado
        const button = event.target;
        const originalText = button.textContent;
        button.textContent = '✅ Copiado';
        button.classList.add('bg-green-500');
        setTimeout(() => {
          button.textContent = originalText;
          button.classList.remove('bg-green-500');
        }, 1500);
      });
    };

    window.deleteTemplate = (index) => {
      if (confirm('¿Estás seguro de que quieres eliminar esta plantilla?')) {
        // Efecto de salida
        const item = templatesUl.children[index];
        item.classList.add('opacity-0', 'scale-95');
        setTimeout(() => {
          templates.splice(index, 1);
          localStorage.setItem('whatsapp-templates', JSON.stringify(templates));
          renderTemplates();
        }, 300);
      }
    };

    cancelEditBtn.addEventListener('click', () => {
      templateForm.reset();
      editingIndex = -1;
      saveBtn.textContent = '💾 Guardar';
      cancelEditBtn.style.display = 'none';
      updatePreview();
    });

    // Inicializar
    renderTemplates();
    updatePreview();
    // Descargar plantillas en un archivo JSON
    document.getElementById('download-btn').addEventListener('click', () => {
      const dataStr = JSON.stringify(templates, null, 2);
      const blob = new Blob([dataStr], { type: "application/json" });
      const url = URL.createObjectURL(blob);

      const a = document.createElement("a");
      a.href = url;
      a.download = "plantillas-whatsapp.json";
      a.click();

      URL.revokeObjectURL(url); // Limpieza
    });
  </script>
</body>

</html>